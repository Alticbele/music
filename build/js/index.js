var dataList,curIndex,len,$=window.Zepto,$body=$(document.body),index=0,curTime=0,dragPer=0,root=window.player;function bindEvent(){$body.on("play",function(){root.playAudio.getAudio('../source/说好不哭.mp3'),"play"==root.playAudio.status&&(root.playAudio.play(),root.dealTime.start()),root.dealTime.renderTime(dataList[index].duration),root.render(dataList[index]),root.dealTime.update(0)}),$body.on("click",".pre-btn",function(){var o=root.getIndex.pre();$body.trigger("play",o)}),$body.on("click",".next-btn",function(){var o=root.getIndex.next();$body.trigger("play",o)}),$body.on("click",".play-btn",function(){"play"==root.playAudio.status?(root.playAudio.pause(),root.dealTime.stop()):(root.playAudio.playTo(curTime),root.dealTime.start(dragPer)),$(this).toggleClass("pause")}),$(".list-btn").on("click",function(){root.renderList(dataList),$(".list-wrapper").css("display","flex")}),$(".close").on("click",function(){$(".list-wrapper").css("display","none")})}function bindTouch(){var o=$(".dot"),t=$(".pro-bar").offset(),a=t.left,r=t.width;o.on("touchstart",function(){root.dealTime.stop()}).on("touchmove",function(o){var t=o.changedTouches[0].clientX;((dragPer=(t-a)/r)<0||1<dragPer)&&(dragPer=0),root.dealTime.update(dragPer)}).on("touchend",function(o){var t=(o.changedTouches[0].clientX-a)/r;(t<0||1<t)&&(t=0);var e=dataList[index].duration;curTime=t*e,"pause"==root.playAudio.status?root.dealTime.update(t):(root.playAudio.playTo(curTime),root.dealTime.start(t),$(".play-btn").addClass("pause"))})}function getData(o){$.ajax({type:"GET",url:o,success:function(o){len=(dataList=o).length,root.render(dataList[0]),bindEvent(),void 0,$body.trigger("play",0),bindTouch()},error:function(){void 0}})}getData("../mock/data.json");